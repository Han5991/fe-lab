# 🗺️ "누가 시키지도 않았는데 라이브러리 번들러 만들기" 실행 계획 (Action Plan)

> **철학**: "손이 먼저 움직여야 머리가 따라온다."
> **사이클**: `MVP 구현` (돌려보고) → `개념 학습` (아하!) → `글 작성` (정리)

---

## 📅 전체 로드맵 (Goal: 4월 마감 - 주 3시간 투자 기준)

직장인 스케줄(주 3시간)에 맞춰 무리하지 않고 **꾸준히** 갈 수 있는 현실적인 일정입니다.

## 📅 전체 로드맵 (선 구현 - 후 집필 전략)

"코드를 완벽히 장악한 뒤에, 여유롭게 회고한다."

| 구분 | 기간 | 주제 | 핵심 활동 |
| :--- | :--- | :--- | :--- |
| **Dev Step 1** | 1월 1주~3주 | **MVP (파일 변환)** | 워밍업: 파일 하나 읽고 쓰기 + TIL 초안 |
| **Dev Step 2** | 1월 4주~2월 2주 | **Resolve & AST** | 모듈 찾기 & 그래프 그리기 (학습 집중) |
| **Dev Step 3** | 2월 3주~3월 2주 | **Bundle & Scope** | 🔥 **최고 난이도**: 파일 합치기 & 충돌 해결 |
| **Dev Step 4** | 3월 3주~3월 4주 | **고도화 (Sourcemap)** | 마무리: 외부 라이브러리 처리 및 소스맵 |
| **집필 & 배포** | 3월 말 ~ 4월 | **시리즈 전체 발행** | 작성해둔 TIL 살 붙여서 순차적 연재 |

---

## 🚀 상세 액션 플랜 (Step-by-Step)

블로그 목차와 동일한 순서로 학습하고 구현합니다.

### Step 1 (MVP): 파이프라인 뼈대 만들기
복잡한 로직 없이, 파일 하나를 읽어 변환 후 다시 쓰는 '최소 기능'을 구현합니다.

*   **💻 Code (구현 목표)**
    *   Node.js `fs` 모듈로 파일 읽기.
    *   `magic-string` 라이브러리로 코드 감싸기 (문자열 조작 맛보기).
    *   결과물을 `dist/bundle.js`로 저장하기.
*   **📚 Study (학습 키워드)**
    *   ESM(`import`) vs CJS(`require`) 차이점
    *   MagicString 사용법
*   **📝 TIL (글 초안 수준의 기록)**
    *   "Step 1: 번들러의 시작, 파일 읽고 쓰기"

### Step 2 (분석): 모듈 탐색과 의존성 그래프
`import` 문을 추적하여 모든 파일을 찾고(Resolve), 그 관계를 연결합니다.

*   **💻 Code (구현 목표)**
    *   `acorn`으로 코드를 파싱해서 **AST(추상 구문 트리)** 보기.
    *   AST에서 `ImportDeclaration` 찾기.
    *   Node.js의 모듈 찾기 규칙(Resolve) 구현하기.
*   **📚 Study (학습 키워드)**
    *   AST (Abstract Syntax Tree) 보는 법
    *   Node.js Resolve Algorithm
    *   DFS / BFS (그래프 순회)
*   **📝 TIL (글 초안 수준의 기록)**
    *   "Step 2: 코드를 데이터로 보는 법 (AST)"

### Step 3 (생성): 번들링과 External 전략
흩어진 모듈을 올바른 순서로 합치고, 외부 라이브러리(`react` 등)를 격리합니다.

*   **💻 Code (구현 목표)**
    *   파일 간의 의존성 관계를 객체(`Graph`)로 표현하기.
    *   순서에 맞게 파일 내용 합치기 (Topological Sort).
    *   Scope 오염 방지(Naming)와 CJS/ESM 듀얼 모드 출력.
*   **📚 Study (학습 키워드)**
    *   변수의 유효 범위(Scope)와 이름 충돌 문제
    *   Closure & IIFE
    *   External & PeerDependencies
*   **📝 TIL (글 초안 수준의 기록)**
    *   "Step 3: 수십 개의 파일을 순서대로 줄 세우는 방법"

### Step 4 (고도화): 개발자 경험 챙기기
디버깅을 위한 소스맵 생성과 타입 정의 파일 처리를 다룹니다.

*   **💻 Code (구현 목표)**
    *   `react` 같은 외부 라이브러리는 번들에 포함하지 않기 (`externals`).
    *   소스맵(Sourcemap) 생성 로직 구현.
    *   실제 `sample-lib` 패키지를 이걸로 빌드해서 다른 프로젝트에서 써보기.
*   **📚 Study (학습 키워드)**
    *   Sourcemap (VLQ 인코딩 맛보기)
    *   Rollup/esbuild와의 비교
*   **📝 TIL (글 초안 수준의 기록)**
    *   "Step 4: 소스맵은 어떻게 원본 위치를 알까?"
    *   "에필로그: 직접 만든 번들러로 라이브러리 배포하기"

---

## 👋 Next Action (다음에 오면 할 일)

**Phase 1 (MVP 구현)** 을 시작하기 위해 아래 환경 세팅부터 진행합니다.

```bash
# 1. 번들러 패키지 (도구)
mkdir -p packages/@package/bundler/src

# 2. 테스트용 라이브러리 (재료)
mkdir -p packages/@package/sample-lib/src
```

다음 세션에서는 위 명령어를 실행하고, 바로 코딩에 들어갑니다! 🚀
